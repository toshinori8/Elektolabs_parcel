{"version":3,"sources":["js/jquery.ajaxchimp.min.js"],"names":["$","ajaxChimp","responses","translations","init","selector","options","fn","each","i","elem","form","email","find","label","settings","extend","attr","url","replace","concat","submit","msg","data","dataArray","serializeArray","index","item","name","value","ajax","success","successCallback","resp","result","removeClass","addClass","parts","split","undefined","parseInt","toString","e","language","html","show","callback","dataType","error","text","submitMsg","jQuery"],"mappings":";CAAA,SAAWA,GACP,aAEAA,EAAEC,UAAY,CACVC,UAAW,CAC+E,wCAAA,EACA,6BAAA,EACA,2CAAA,EACA,iFAAA,EACA,oFAAA,EACA,8EAAA,GAE1FC,aAAc,CACJ,GAAA,MAEVC,KAAM,SAAUC,EAAUC,GACtBN,EAAEK,GAAUJ,UAAUK,KAI9BN,EAAEO,GAAGN,UAAY,SAAUK,GAiGhB,OAhGPN,EAAE,MAAMQ,KAAK,SAASC,EAAGC,GACjBC,IAAAA,EAAOX,EAAEU,GACTE,EAAQD,EAAKE,KAAK,qBAClBC,EAAQH,EAAKE,KAAK,SAElBE,EAAWf,EAAEgB,OAAO,CACbL,IAAAA,EAAKM,KAAK,UACL,SAAA,MACbX,GAECY,EAAMH,EAASG,IAAIC,QAAQ,SAAU,eAAeC,OAAO,QAE/DT,EAAKM,KAAK,aAAc,QACxBL,EAAMK,KAAK,OAAQ,SAEnBN,EAAKU,OAAO,WACJC,IAAAA,EAiDAC,IAAAA,EAAO,GACPC,EAAYb,EAAKc,iBACrBzB,EAAEQ,KAAKgB,EAAW,SAAUE,EAAOC,GAC/BJ,EAAKI,EAAKC,MAAQD,EAAKE,QAG3B7B,EAAE8B,KAAK,CACHZ,IAAKA,EACLK,KAAMA,EACNQ,QAzDKC,SAAgBC,GACjBA,GAAgB,YAAhBA,EAAKC,OACLZ,EAAM,wCACNR,EAAMqB,YAAY,SAASC,SAAS,SACpCxB,EAAMuB,YAAY,SAASC,SAAS,aACjC,CACHxB,EAAMuB,YAAY,SAASC,SAAS,SACpCtB,EAAMqB,YAAY,SAASC,SAAS,SAEhC,IACIC,IAAAA,EAAQJ,EAAKX,IAAIgB,MAAM,MAAO,QACjBC,IAAbF,EAAM,GACNf,EAAMW,EAAKX,IAEHkB,SAASH,EAAM,GAAI,IACrBI,aAAeJ,EAAM,IACfA,EAAM,GACdf,EAAMe,EAAM,IAGZf,EAAMW,EAAKX,IAIvB,MAAOoB,GAEHpB,EAAMW,EAAKX,KAMO,OAAtBP,EAAS4B,eACyBJ,IAA/BvC,EAAEC,UAAUC,UAAUoB,IACtBtB,EAAEC,UAAUE,cACZH,EAAEC,UAAUE,aAAaY,EAAS4B,WAClC3C,EAAEC,UAAUE,aAAaY,EAAS4B,UAAU3C,EAAEC,UAAUC,UAAUoB,MAErEA,EAAMtB,EAAEC,UAAUE,aAAaY,EAAS4B,UAAU3C,EAAEC,UAAUC,UAAUoB,KAE5ER,EAAM8B,KAAKtB,GAEXR,EAAM+B,KAAK,KACP9B,EAAS+B,UACT/B,EAAS+B,SAASb,IActBc,SAAU,QACVC,MAAO,SAAUf,EAAMgB,OAMvBC,IAAAA,EAAY,gBAWT,MATmB,OAAtBnC,EAAS4B,UACN3C,EAAEC,UAAUE,cACZH,EAAEC,UAAUE,aAAaY,EAAS4B,WAClC3C,EAAEC,UAAUE,aAAaY,EAAS4B,UAAlC,SAEHO,EAAYlD,EAAEC,UAAUE,aAAaY,EAAS4B,UAAlC,QAEhB7B,EAAM8B,KAAKM,GAAWL,KAAK,MAEpB,MAGR,MArHf,CAuHGM","file":"jquery.ajaxchimp.min.9bd1300c.js","sourceRoot":"../../source","sourcesContent":["(function ($) {\n    'use strict';\n\n    $.ajaxChimp = {\n        responses: {\n            'We have sent you a confirmation email'                                             : 0,\n            'Please enter a valid email'                                                        : 1,\n            'An email address must contain a single @'                                          : 2,\n            'The domain portion of the email address is invalid (the portion after the @: )'    : 3,\n            'The username portion of the email address is invalid (the portion before the @: )' : 4,\n            'This email address looks fake or invalid. Please enter a real email address'       : 5\n        },\n        translations: {\n            'en': null\n        },\n        init: function (selector, options) {\n            $(selector).ajaxChimp(options);\n        }\n    };\n\n    $.fn.ajaxChimp = function (options) {\n        $(this).each(function(i, elem) {\n            var form = $(elem);\n            var email = form.find('input[type=email]');\n            var label = form.find('.info');\n\n            var settings = $.extend({\n                'url': form.attr('action'),\n                'language': 'en'\n            }, options);\n\n            var url = settings.url.replace('/post?', '/post-json?').concat('&c=?');\n\n            form.attr('novalidate', 'true');\n            email.attr('name', 'EMAIL');\n\n            form.submit(function () {\n                var msg;\n                function successCallback(resp) {\n                    if (resp.result === 'success') {\n                        msg = 'We have sent you a confirmation email';\n                        label.removeClass('error').addClass('valid');\n                        email.removeClass('error').addClass('valid');\n                    } else {\n                        email.removeClass('valid').addClass('error');\n                        label.removeClass('valid').addClass('error');\n                        var index = -1;\n                        try {\n                            var parts = resp.msg.split(' - ', 2);\n                            if (parts[1] === undefined) {\n                                msg = resp.msg;\n                            } else {\n                                var i = parseInt(parts[0], 10);\n                                if (i.toString() === parts[0]) {\n                                    index = parts[0];\n                                    msg = parts[1];\n                                } else {\n                                    index = -1;\n                                    msg = resp.msg;\n                                }\n                            }\n                        }\n                        catch (e) {\n                            index = -1;\n                            msg = resp.msg;\n                        }\n                    }\n\n                    // Translate and display message\n                    if (\n                        settings.language !== 'en'\n                        && $.ajaxChimp.responses[msg] !== undefined\n                        && $.ajaxChimp.translations\n                        && $.ajaxChimp.translations[settings.language]\n                        && $.ajaxChimp.translations[settings.language][$.ajaxChimp.responses[msg]]\n                    ) {\n                        msg = $.ajaxChimp.translations[settings.language][$.ajaxChimp.responses[msg]];\n                    }\n                    label.html(msg);\n\n                    label.show(2000);\n                    if (settings.callback) {\n                        settings.callback(resp);\n                    }\n                }\n\n                var data = {};\n                var dataArray = form.serializeArray();\n                $.each(dataArray, function (index, item) {\n                    data[item.name] = item.value;\n                });\n\n                $.ajax({\n                    url: url,\n                    data: data,\n                    success: successCallback,\n                    dataType: 'jsonp',\n                    error: function (resp, text) {\n                       // console.log('mailchimp ajax submit error: ' + text);\n                    }\n                });\n\n                // Translate and display submit message\n                var submitMsg = 'Submitting...';\n                if(\n                    settings.language !== 'en'\n                    && $.ajaxChimp.translations\n                    && $.ajaxChimp.translations[settings.language]\n                    && $.ajaxChimp.translations[settings.language]['submit']\n                ) {\n                    submitMsg = $.ajaxChimp.translations[settings.language]['submit'];\n                }\n                label.html(submitMsg).show(2000);\n\n                return false;\n            });\n        });\n        return this;\n    };\n})(jQuery);"]}